{"name":"Express-boilerplate","tagline":"Express boilerplate using MVC pattern and ES2015","body":"Express boilerplate\r\n================\r\n\r\nI like Ruby On Rails and his structure so I decided to follow their MVC conventions with the node module expressjs. I'm also inspired\r\nwith the Ember.js framework that I like too.\r\n\r\n\r\n## Install\r\n\r\nAll the code is written with ES2015 syntax, you need the Node v4 version.\r\n\r\n\r\n- Clone the repo\r\n- `npm i`\r\n- `npm start` -> Will start a nodemon instance for your server\r\n\r\n## ES2015\r\n\r\nThis boilerplate use ES2015 syntax with Node.js 4.0, you can check out the [feature available here](https://nodejs.org/en/docs/es6/)\r\n\r\n## rootRequire\r\n\r\n**rootRequire** is a global function designed to avoid some excessive path in your application and avoid NODE_PATH configuration (specialy for Windows users).\r\nInstead of calling require, just call rootRequire and the path of your module. **Remember**, the path always start from the top of your application :\r\n\r\n```js\r\nlet Book = rootRequire('app/models/Book');\r\n```\r\n\r\n## Structure\r\n\r\nMVC pattern is cool and simple to understand, so it's based on him.\r\nFirst, you have an **app** folder who will contain all code of your application :\r\n\r\n**app/**\r\n- [controllers](#controller)\r\n- [models](#models)\r\n- [views](#views)\r\n- [routes](#routes)\r\n- <a href=\"#routerjs\">Router.js</a>\r\n\r\n**assets/**\r\n\r\n**config/**\r\n### Controller\r\n\r\nA controller is design to handle the logic of your application, so he will handle the request and send the response. You should create **one controller per route**, so if you create a **/users** route the controller should be named **UsersController**. This pattern allow you to quickly find the file you want in your text editor.\r\n\r\nThe structure of a controller is simple, export an object of methods. Here is an example :\r\n```js\r\n// IndexController.js\r\n\r\nmodule.exports = {\r\n  index: {\r\n    get(req, res) {\r\n      res.locals.title = \"Home\";\r\n      res.render('index');\r\n    }\r\n  }\r\n};\r\n```\r\n\r\n### Models\r\n\r\nI chose [Sequelize](http://docs.sequelizejs.com/en/latest/) for the ORM because it has a great syntax based on Promise and has a great documentation.\r\nMoreover, you can choose the database type of you want (MySQL, Postgre, Cassandra, etc...).\r\nWith this way, you can create and share your models very easly.\r\n\r\nEach model must have a **sync** in the *createTables* task wich can be run with the npm command : `npm run db:tables:create`.\r\n\r\nExample :\r\n```js\r\n'use strict';\r\n// app/models/Book.js\r\n\r\nlet db   = rootRequire('config/db');\r\nlet Book = db.define('book', {\r\n  title: {\r\n    type: db._Sequelize.STRING,\r\n  },\r\n});\r\n\r\nmodule.exports = Book;\r\n```\r\n\r\n```js\r\n'use strict';\r\nrequire('../utils/rootRequire')();\r\nlet Book = rootRequire('app/models/Book');\r\n\r\nBook.sync().then(() => {\r\n  console.log('Creating table Book');\r\n  // Todo : Kill the script\r\n});\r\n\r\n```\r\n\r\n### Views\r\n\r\nThis boilerplate use **Jade** for templating, if you prefer ejs, you just need to edit the `middleware.js` file in the config folder.\r\n\r\nAs I said for controller and routes, it's almost the same for the views. You should create a folder based on your routes (ex: users), create a\r\n**users** folder who will contain all the view concerned by the user.\r\n\r\n### Routes\r\n\r\nThe routes files are used for making the relation between your controller and the URLs. Here is an example :\r\n```js\r\n'use strict';\r\n// IndexRoute.js\r\n\r\n/**\r\n* Home Route\r\n* path: /\r\n******************** */\r\n\r\nlet express    = require('express');\r\nlet Controller = rootRequire('app/controllers/IndexController');\r\nlet router     = express.Router();\r\n\r\n\r\nrouter.get('/', Controller.index.get);\r\n\r\nmodule.exports = router;\r\n```\r\n\r\nAs you can see, I put a function according the HTTP verb like here **index.get** for the GET on `/`.\r\n\r\n### Router.js\r\n\r\nThe **Router.js** may intrigue you, it serves to handle all of your routes. Here is an example :\r\n```js\r\n// Router.js\r\n\r\nmodule.exports = [\r\n  {\r\n    path: '/',\r\n    handler: rootRequire('app/routes/IndexRoute'),\r\n  },\r\n  {\r\n    path: '/books',\r\n    handler: rootRequire('app/routes/BooksRoute'),\r\n  },\r\n];\r\n\r\n```\r\n\r\n## Assets\r\n\r\nThis boilerplate set the **assets** folder for all of your static files. Some folders are already available :\r\n\r\n- stylesheets\r\n- javascripts\r\n- images\r\n- fonts\r\n\r\nIn your views, the links will look like this : `/stylesheets/style.css` or `/images/logo.png`.\r\n\r\n## Config\r\n\r\nThe folder **config** is design to keep all config files like middleware, mysql config, etc..\r\nThe idea of this folder is to separate the logic of the configuration. With MySQL as example, you just have to create the connection and export the object for making queries.\r\n\r\n## Testing\r\n\r\nThis boilerplate use [Mocha](https://mochajs.org) and [superagent](https://github.com/visionmedia/superagent) for testing\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}